# Whitelist approach: ignore everything, then allow only what Docker builds need
# This reduces build context from ~900MB to just what's required

# Ignore everything first
*

# === n8n main image (docker/images/n8n/Dockerfile) ===
!compiled
!compiled/**
!THIRD_PARTY_LICENSES.md

# === runners image (docker/images/runners/Dockerfile + Dockerfile.distroless) ===
!dist
!dist/task-runner-javascript
!dist/task-runner-javascript/**

# === Docker build files (entrypoints, configs) ===
!docker
!docker/images
!docker/images/n8n
!docker/images/n8n/docker-entrypoint.sh
!docker/images/runners
!docker/images/runners/n8n-task-runners.json

# === SPAIK Source Build (Dockerfile at root) ===
# Package configuration files
!package.json
!pnpm-lock.yaml
!pnpm-workspace.yaml
!turbo.json
!.npmrc

# All packages (source code)
!packages
!packages/**

# Patches required for pnpm install
!patches
!patches/**

# Scripts required for build process
!scripts
!scripts/**

# GitHub scripts (for trim-fe-packageJson.js)
!.github
!.github/scripts
!.github/scripts/**

# Exclude test files and unnecessary items from packages
packages/**/test
packages/**/tests
packages/**/__tests__
packages/**/*.test.ts
packages/**/*.spec.ts
packages/**/coverage
packages/**/.turbo
